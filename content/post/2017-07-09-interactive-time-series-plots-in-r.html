---
title: Interactive time-series plots in R
author: ~
date: '2017-07-08'
slug: interactive-time-series-plots-in-r
categories: ["R","data-visualization","interactive"]
tags: ["highcahrtr","dygraph","plotly","time-series"]
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/dygraphs/dygraph.css" rel="stylesheet" />
<script src="/rmarkdown-libs/dygraphs/dygraph-combined.js"></script>
<script src="/rmarkdown-libs/moment/moment.js"></script>
<script src="/rmarkdown-libs/moment-timezone/moment-timezone-with-data.js"></script>
<script src="/rmarkdown-libs/moment-fquarter/moment-fquarter.min.js"></script>
<script src="/rmarkdown-libs/dygraphs-binding/dygraphs.js"></script>


<div id="plotting-time-series-object" class="section level2">
<h2>Plotting Time Series Object</h2>
<p>There are lots of good plotting packages in R. And in this post I would like to show some of the interactive charting libraries to plot time series in R. If the object that you are trying to plot is a time-series object then one can plot it really easily.</p>
<pre class="r"><code>lungDeaths &lt;- cbind(mdeaths, fdeaths)
str(lungDeaths)</code></pre>
<pre><code>##  Time-Series [1:72, 1:2] from 1974 to 1980: 2134 1863 1877 1877 1492 ...
##  - attr(*, &quot;dimnames&quot;)=List of 2
##   ..$ : NULL
##   ..$ : chr [1:2] &quot;mdeaths&quot; &quot;fdeaths&quot;</code></pre>
<div id="plotting-with-dygraph" class="section level3">
<h3>Plotting with dygraph</h3>
<pre class="r"><code>dygraph(lungDeaths) %&gt;%
  dySeries(&quot;mdeaths&quot;,label=&quot;male&quot;) %&gt;%
  dySeries(&quot;fdeaths&quot;,label=&quot;female&quot;)</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"attrs":{"labels":["month","male","female"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}},"series":{"male":{"axis":"y"},"female":{"axis":"y"}}},"scale":"monthly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["1974-01-01T00:00:00.000Z","1974-02-01T00:00:00.000Z","1974-03-01T00:00:00.000Z","1974-04-01T00:00:00.000Z","1974-05-01T00:00:00.000Z","1974-06-01T00:00:00.000Z","1974-07-01T00:00:00.000Z","1974-08-01T00:00:00.000Z","1974-09-01T00:00:00.000Z","1974-10-01T00:00:00.000Z","1974-11-01T00:00:00.000Z","1974-12-01T00:00:00.000Z","1975-01-01T00:00:00.000Z","1975-02-01T00:00:00.000Z","1975-03-01T00:00:00.000Z","1975-04-01T00:00:00.000Z","1975-05-01T00:00:00.000Z","1975-06-01T00:00:00.000Z","1975-07-01T00:00:00.000Z","1975-08-01T00:00:00.000Z","1975-09-01T00:00:00.000Z","1975-10-01T00:00:00.000Z","1975-11-01T00:00:00.000Z","1975-12-01T00:00:00.000Z","1976-01-01T00:00:00.000Z","1976-02-01T00:00:00.000Z","1976-03-01T00:00:00.000Z","1976-04-01T00:00:00.000Z","1976-05-01T00:00:00.000Z","1976-06-01T00:00:00.000Z","1976-07-01T00:00:00.000Z","1976-08-01T00:00:00.000Z","1976-09-01T00:00:00.000Z","1976-10-01T00:00:00.000Z","1976-11-01T00:00:00.000Z","1976-12-01T00:00:00.000Z","1977-01-01T00:00:00.000Z","1977-02-01T00:00:00.000Z","1977-03-01T00:00:00.000Z","1977-04-01T00:00:00.000Z","1977-05-01T00:00:00.000Z","1977-06-01T00:00:00.000Z","1977-07-01T00:00:00.000Z","1977-08-01T00:00:00.000Z","1977-09-01T00:00:00.000Z","1977-10-01T00:00:00.000Z","1977-11-01T00:00:00.000Z","1977-12-01T00:00:00.000Z","1978-01-01T00:00:00.000Z","1978-02-01T00:00:00.000Z","1978-03-01T00:00:00.000Z","1978-04-01T00:00:00.000Z","1978-05-01T00:00:00.000Z","1978-06-01T00:00:00.000Z","1978-07-01T00:00:00.000Z","1978-08-01T00:00:00.000Z","1978-09-01T00:00:00.000Z","1978-10-01T00:00:00.000Z","1978-11-01T00:00:00.000Z","1978-12-01T00:00:00.000Z","1979-01-01T00:00:00.000Z","1979-02-01T00:00:00.000Z","1979-03-01T00:00:00.000Z","1979-04-01T00:00:00.000Z","1979-05-01T00:00:00.000Z","1979-06-01T00:00:00.000Z","1979-07-01T00:00:00.000Z","1979-08-01T00:00:00.000Z","1979-09-01T00:00:00.000Z","1979-10-01T00:00:00.000Z","1979-11-01T00:00:00.000Z","1979-12-01T00:00:00.000Z"],[2134,1863,1877,1877,1492,1249,1280,1131,1209,1492,1621,1846,2103,2137,2153,1833,1403,1288,1186,1133,1053,1347,1545,2066,2020,2750,2283,1479,1189,1160,1113,970,999,1208,1467,2059,2240,1634,1722,1801,1246,1162,1087,1013,959,1179,1229,1655,2019,2284,1942,1423,1340,1187,1098,1004,970,1140,1110,1812,2263,1820,1846,1531,1215,1075,1056,975,940,1081,1294,1341],[901,689,827,677,522,406,441,393,387,582,578,666,830,752,785,664,467,438,421,412,343,440,531,771,767,1141,896,532,447,420,376,330,357,445,546,764,862,660,663,643,502,392,411,348,387,385,411,638,796,853,737,546,530,446,431,362,387,430,425,679,821,785,727,612,478,429,405,379,393,411,487,574]]},"evals":[],"jsHooks":[]}</script>
</div>
<div id="plotting-with-highchart" class="section level3">
<h3>Plotting with highchart</h3>
<p><strong>If you are using highchart for business or governmental use please take note of its use policy you need to buy license to use it.</strong></p>
<pre class="r"><code>highchart1 &lt;- hchart(mdeaths) %&gt;% hc_add_series(fdeaths)
highchart1</code></pre>
<iframe seamless src="../figures_2/fig1/index.html" width="100%" height="500" id="iframe_container">
</iframe>
</div>
</div>
<div id="plotting-data-frame" class="section level2">
<h2>Plotting data frame</h2>
<p>Most of the time your data donâ€™t come nicely wrapped as a time series object often in R they come as data frame. Lets plot some data frame</p>
<pre class="r"><code># Create sequence of dates 
dates &lt;- seq(ymd(&#39;2012-04-07&#39;),ymd(&#39;2012-04-07&#39;)+143,by=&#39;days&#39;)
# Creeate a data frame

passenger &lt;- data.frame(dates,AirPassengers) %&gt;%
            mutate(BusPassenger = AirPassengers + 100)</code></pre>
<pre><code>## Warning in mutate_impl(.data, dots): &#39;.Random.seed&#39; is not an integer
## vector but of type &#39;NULL&#39;, so ignored</code></pre>
<div id="plotting-with-dygraph-1" class="section level3">
<h3>Plotting with dygraph</h3>
<p>In order to use dygraph we need to convert it into time series object here we are using <strong>ts</strong> package</p>
<pre class="r"><code>dyplot2 &lt;- dygraph(xts(passenger[,2:length(passenger)],passenger$dates),
                              ylab = &quot;number&quot;,main=&quot;Air Passengers Vs Bus Passengers&quot;) %&gt;%
  dyOptions(colors = RColorBrewer::brewer.pal(5, &quot;Set2&quot;),
            strokeWidth=2,drawGrid=T,fillAlpha=0.7,gridLineWidth=0.09) %&gt;%
  dyHighlight(highlightCircleSize = 5, 
              highlightSeriesBackgroundAlpha = 0.2,
              hideOnMouseOut = FALSE,
              highlightSeriesOpts = list(strokeWidth = 3)) %&gt;%
  dyRangeSelector()%&gt;%
  dyRangeSelector(height = 20,fillColor=&quot;Tomato&quot;,strokeColor=&quot;orange&quot;)

dyplot2</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"attrs":{"title":"Air Passengers Vs Bus Passengers","ylabel":"number","labels":["day","AirPassengers","BusPassenger"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"stackedGraph":false,"fillGraph":false,"fillAlpha":0.7,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":2,"strokeBorderColor":"white","colors":["#66C2A5","#FC8D62","#8DA0CB","#E78AC3","#A6D854"],"colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.09,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"highlightCircleSize":5,"highlightSeriesBackgroundAlpha":0.2,"highlightSeriesOpts":{"strokeWidth":3},"hideOverlayOnMouseOut":false,"showRangeSelector":true,"rangeSelectorHeight":20,"rangeSelectorPlotFillColor":"Tomato","rangeSelectorPlotStrokeColor":"orange","interactionModel":"Dygraph.Interaction.defaultModel"},"scale":"daily","annotations":[],"shadings":[],"events":[],"format":"date","data":[["2012-04-07T00:00:00.000Z","2012-04-08T00:00:00.000Z","2012-04-09T00:00:00.000Z","2012-04-10T00:00:00.000Z","2012-04-11T00:00:00.000Z","2012-04-12T00:00:00.000Z","2012-04-13T00:00:00.000Z","2012-04-14T00:00:00.000Z","2012-04-15T00:00:00.000Z","2012-04-16T00:00:00.000Z","2012-04-17T00:00:00.000Z","2012-04-18T00:00:00.000Z","2012-04-19T00:00:00.000Z","2012-04-20T00:00:00.000Z","2012-04-21T00:00:00.000Z","2012-04-22T00:00:00.000Z","2012-04-23T00:00:00.000Z","2012-04-24T00:00:00.000Z","2012-04-25T00:00:00.000Z","2012-04-26T00:00:00.000Z","2012-04-27T00:00:00.000Z","2012-04-28T00:00:00.000Z","2012-04-29T00:00:00.000Z","2012-04-30T00:00:00.000Z","2012-05-01T00:00:00.000Z","2012-05-02T00:00:00.000Z","2012-05-03T00:00:00.000Z","2012-05-04T00:00:00.000Z","2012-05-05T00:00:00.000Z","2012-05-06T00:00:00.000Z","2012-05-07T00:00:00.000Z","2012-05-08T00:00:00.000Z","2012-05-09T00:00:00.000Z","2012-05-10T00:00:00.000Z","2012-05-11T00:00:00.000Z","2012-05-12T00:00:00.000Z","2012-05-13T00:00:00.000Z","2012-05-14T00:00:00.000Z","2012-05-15T00:00:00.000Z","2012-05-16T00:00:00.000Z","2012-05-17T00:00:00.000Z","2012-05-18T00:00:00.000Z","2012-05-19T00:00:00.000Z","2012-05-20T00:00:00.000Z","2012-05-21T00:00:00.000Z","2012-05-22T00:00:00.000Z","2012-05-23T00:00:00.000Z","2012-05-24T00:00:00.000Z","2012-05-25T00:00:00.000Z","2012-05-26T00:00:00.000Z","2012-05-27T00:00:00.000Z","2012-05-28T00:00:00.000Z","2012-05-29T00:00:00.000Z","2012-05-30T00:00:00.000Z","2012-05-31T00:00:00.000Z","2012-06-01T00:00:00.000Z","2012-06-02T00:00:00.000Z","2012-06-03T00:00:00.000Z","2012-06-04T00:00:00.000Z","2012-06-05T00:00:00.000Z","2012-06-06T00:00:00.000Z","2012-06-07T00:00:00.000Z","2012-06-08T00:00:00.000Z","2012-06-09T00:00:00.000Z","2012-06-10T00:00:00.000Z","2012-06-11T00:00:00.000Z","2012-06-12T00:00:00.000Z","2012-06-13T00:00:00.000Z","2012-06-14T00:00:00.000Z","2012-06-15T00:00:00.000Z","2012-06-16T00:00:00.000Z","2012-06-17T00:00:00.000Z","2012-06-18T00:00:00.000Z","2012-06-19T00:00:00.000Z","2012-06-20T00:00:00.000Z","2012-06-21T00:00:00.000Z","2012-06-22T00:00:00.000Z","2012-06-23T00:00:00.000Z","2012-06-24T00:00:00.000Z","2012-06-25T00:00:00.000Z","2012-06-26T00:00:00.000Z","2012-06-27T00:00:00.000Z","2012-06-28T00:00:00.000Z","2012-06-29T00:00:00.000Z","2012-06-30T00:00:00.000Z","2012-07-01T00:00:00.000Z","2012-07-02T00:00:00.000Z","2012-07-03T00:00:00.000Z","2012-07-04T00:00:00.000Z","2012-07-05T00:00:00.000Z","2012-07-06T00:00:00.000Z","2012-07-07T00:00:00.000Z","2012-07-08T00:00:00.000Z","2012-07-09T00:00:00.000Z","2012-07-10T00:00:00.000Z","2012-07-11T00:00:00.000Z","2012-07-12T00:00:00.000Z","2012-07-13T00:00:00.000Z","2012-07-14T00:00:00.000Z","2012-07-15T00:00:00.000Z","2012-07-16T00:00:00.000Z","2012-07-17T00:00:00.000Z","2012-07-18T00:00:00.000Z","2012-07-19T00:00:00.000Z","2012-07-20T00:00:00.000Z","2012-07-21T00:00:00.000Z","2012-07-22T00:00:00.000Z","2012-07-23T00:00:00.000Z","2012-07-24T00:00:00.000Z","2012-07-25T00:00:00.000Z","2012-07-26T00:00:00.000Z","2012-07-27T00:00:00.000Z","2012-07-28T00:00:00.000Z","2012-07-29T00:00:00.000Z","2012-07-30T00:00:00.000Z","2012-07-31T00:00:00.000Z","2012-08-01T00:00:00.000Z","2012-08-02T00:00:00.000Z","2012-08-03T00:00:00.000Z","2012-08-04T00:00:00.000Z","2012-08-05T00:00:00.000Z","2012-08-06T00:00:00.000Z","2012-08-07T00:00:00.000Z","2012-08-08T00:00:00.000Z","2012-08-09T00:00:00.000Z","2012-08-10T00:00:00.000Z","2012-08-11T00:00:00.000Z","2012-08-12T00:00:00.000Z","2012-08-13T00:00:00.000Z","2012-08-14T00:00:00.000Z","2012-08-15T00:00:00.000Z","2012-08-16T00:00:00.000Z","2012-08-17T00:00:00.000Z","2012-08-18T00:00:00.000Z","2012-08-19T00:00:00.000Z","2012-08-20T00:00:00.000Z","2012-08-21T00:00:00.000Z","2012-08-22T00:00:00.000Z","2012-08-23T00:00:00.000Z","2012-08-24T00:00:00.000Z","2012-08-25T00:00:00.000Z","2012-08-26T00:00:00.000Z","2012-08-27T00:00:00.000Z","2012-08-28T00:00:00.000Z"],[112,118,132,129,121,135,148,148,136,119,104,118,115,126,141,135,125,149,170,170,158,133,114,140,145,150,178,163,172,178,199,199,184,162,146,166,171,180,193,181,183,218,230,242,209,191,172,194,196,196,236,235,229,243,264,272,237,211,180,201,204,188,235,227,234,264,302,293,259,229,203,229,242,233,267,269,270,315,364,347,312,274,237,278,284,277,317,313,318,374,413,405,355,306,271,306,315,301,356,348,355,422,465,467,404,347,305,336,340,318,362,348,363,435,491,505,404,359,310,337,360,342,406,396,420,472,548,559,463,407,362,405,417,391,419,461,472,535,622,606,508,461,390,432],[212,218,232,229,221,235,248,248,236,219,204,218,215,226,241,235,225,249,270,270,258,233,214,240,245,250,278,263,272,278,299,299,284,262,246,266,271,280,293,281,283,318,330,342,309,291,272,294,296,296,336,335,329,343,364,372,337,311,280,301,304,288,335,327,334,364,402,393,359,329,303,329,342,333,367,369,370,415,464,447,412,374,337,378,384,377,417,413,418,474,513,505,455,406,371,406,415,401,456,448,455,522,565,567,504,447,405,436,440,418,462,448,463,535,591,605,504,459,410,437,460,442,506,496,520,572,648,659,563,507,462,505,517,491,519,561,572,635,722,706,608,561,490,532]],"fixedtz":false,"tzone":"UTC"},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
<p>Ther is plenty of opiton to customize the dygraph and if you like to know more see <a href="https://rstudio.github.io/dygraphs/gallery-series-options.html">here</a></p>
</div>
<div id="plotting-with-highchart-1" class="section level3">
<h3>Plotting with highchart</h3>
<pre class="r"><code>highchart2 &lt;- highchart(type = &quot;stock&quot;) %&gt;% 
              hc_title(text = &quot;Air Passenger Vs Bus Passenger&quot;) %&gt;% 
              hc_subtitle(text = &quot;Weekly-Data&quot;) %&gt;%
              hc_add_series(xts(passenger[,2],passenger$dates),name=&quot;Bus Passenger&quot;) %&gt;%
              hc_add_series(xts(passenger[,3],passenger$dates),name=&quot;Air Passenger&quot;)

highchart2</code></pre>
<iframe seamless src="../figures_2/high2/index.html" width="100%" height="500" id="iframe_container">
</iframe>
<p>If you do not want to convert data into time series in highchart there is still another way. First we have to convert or wide data frame to long dataframe using **reshape2&quot; pcakage. If you are unfamiliar with this cocenpt of wide and long format see <a href="http://www.cookbook-r.com/Manipulating_data/Converting_data_between_wide_and_long_format/">here</a> for more.</p>
<pre class="r"><code># Convering wide data to long
melted_passenger &lt;- melt(passenger,id=&quot;dates&quot;)</code></pre>
<pre class="r"><code>highchart3 &lt;- hchart(melted_passenger,type=&quot;line&quot;,hcaes(x=dates,y=value,group=variable)) %&gt;%
              hc_title(text = &quot;Air Vs Bus Passenger&quot;) %&gt;%
              hc_yAxis(title = list(text = &quot;number of people&quot;))
highchart3</code></pre>
<iframe seamless src="../figures_2/high3/index.html" width="100%" height="500" id="iframe_container">
</iframe>
</div>
<div id="plotting-with-plotly" class="section level3">
<h3>Plotting with plotly</h3>
<pre class="r"><code>plotly1 &lt;- plot_ly(passenger,x= ~dates, y = ~AirPassengers, name = &#39;trace 0&#39;, type = &#39;scatter&#39;, mode = &#39;lines&#39;) %&gt;%
          add_trace(y = ~BusPassenger, name = &#39;trace 1&#39;, mode = &#39;lines+markers&#39;)

plotly1</code></pre>
<iframe seamless src="../figures_2/plotly1/index.html" width="100%" height="500" id="iframe_container">
</iframe>
<p><strong>You can also use the melted data frame in ploty to plot similar chart and I like using the following as I think it is more elegant R way of plotting chart</strong></p>
<pre class="r"><code>plotly2 &lt;- plot_ly(melted_passenger, x = ~dates, y = ~value, color= ~variable) %&gt;%
            add_lines() %&gt;%
          layout(title = &#39;Air Vs Bus Passengers&#39;,
         xaxis = list(title = &#39;Date&#39;),
         yaxis = list (title = &#39;Number of People&#39;))

plotly2</code></pre>
<iframe seamless src="../figures_2/plotly2/index.html" width="100%" height="500" id="iframe_container">
</iframe>
</div>
</div>
<div id="final-thoughts" class="section level2">
<h2>Final Thoughts</h2>
<p>I like plotting with highchart as I like the way its looks and with hihgchart there it is easy to plot all kind of interactive plots; however it comes with some cost if you are using for a business (although I would say it is worth paying for). I like dygraphs too it can be customized and it easy to plot if the plotting object is time series and it also offer high ineracitve properties. Plotly is good too with plenty of documentation and you can also easily share your charts. Another interactive plotting library that I didnâ€™t show here was <strong>rCharts</strong> it is quite promising and frustrating at the same time as it does not go down well with the mark-down files. See here for what can you do with <a href="http://www.rpubs.com/dnchari/rcharts">rCharts</a></p>
</div>
